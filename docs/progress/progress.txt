# PaperBot Progress Log

Format:
- Date:
- Owner:
- Branch:
- Done:
- Validation:
- Risks/Notes:
- Next:

---

- Date: 2026-02-13
- Owner: codex
- Branch: master
- Done:
  - Added long-running harness baseline files:
    - docs/HARNESS.md
    - scripts/session_bootstrap.sh
    - docs/issue_contract.json
    - docs/progress/progress.txt
  - Initialized issue contract entries for Scholar intelligence refactor and harness baseline.
- Validation:
  - chmod +x scripts/session_bootstrap.sh
  - scripts/session_bootstrap.sh runs and prints repository/session context
- Risks/Notes:
  - issue_contract.json is intentionally minimal and should be updated incrementally, not rewritten.
- Next:
  - Complete SCHOLAR-P0 and SCHOLAR-P1 implementation and mark status updates.

---

- Date: 2026-02-13
- Owner: codex
- Branch: master
- Done:
  - Refactored Scholars list into a watchlist console focused on decisions and actions.
  - Added decision metrics per scholar card: Momentum, Track Match, New Since Last Seen, Risk/Noise.
  - Added action controls: Add to Watchlist, Mute (selected), Create Track from Scholar.
  - Added local mute/last-seen persistence for operator workflow continuity.
  - Upgraded Scholar detail page to an evidence-driven cockpit with decision cards and evidence links in Signals/Network sections.
  - Strengthened cross-module action links to Research, Workflows, Dashboard, Papers.
- Validation:
  - ./node_modules/.bin/eslint src/components/scholars/ScholarsWatchlist.tsx src/app/scholars/[id]/page.tsx
  - ./node_modules/.bin/tsc --noEmit
  - python -m py_compile src/paperbot/api/routes/research.py
  - ./scripts/session_bootstrap.sh
- Risks/Notes:
  - "Mute" and "Last Seen" are currently local user-browser state (localStorage), not server-synced preferences.
  - "Create Track from Scholar" currently creates a track and routes into Research; no duplicate-name reconciliation beyond backend response.
- Next:
  - If needed, move mute/seen state to backend user preferences and add team-shared watchlist controls.

---

- Date: 2026-02-13
- Owner: codex
- Branch: master
- Done:
  - Started the session via `scripts/session_bootstrap.sh` and followed harness workflow.
  - Upgraded Scholar state handling from localStorage to backend persistence via scholar subscription PATCH.
  - Added backend support for scholar metadata fields: `muted`, `last_seen_at`, `last_seen_cached_papers`.
  - Updated scholars list API aggregation to return persisted state metadata.
  - Updated Scholars watchlist UI to read/write muted and last-seen state through backend APIs.
  - Expanded unit tests for subscription service and scholar routes to cover metadata persistence and response fields.
- Validation:
  - python -m black src/paperbot/api/routes/research.py src/paperbot/infrastructure/services/subscription_service.py tests/unit/test_subscription_service.py tests/unit/test_research_scholar_routes.py
  - python -m py_compile src/paperbot/api/routes/research.py src/paperbot/infrastructure/services/subscription_service.py tests/unit/test_subscription_service.py tests/unit/test_research_scholar_routes.py
  - pytest tests/unit/test_subscription_service.py tests/unit/test_research_scholar_routes.py -q (environment exits -1 without output)
  - (cd web && ./node_modules/.bin/eslint src/components/scholars/ScholarsWatchlist.tsx src/lib/api.ts src/lib/types.ts)
  - (cd web && ./node_modules/.bin/tsc --noEmit)
  - ./scripts/session_bootstrap.sh
- Risks/Notes:
  - Scholar state is now persisted in subscription config; this is user-global and not multi-user isolated yet.
- Next:
  - If needed, add per-user scholar preference storage and team-shared controls.

---

- Date: 2026-02-13
- Owner: codex
- Branch: master
- Done:
  - Ran `scripts/session_bootstrap.sh` at session start to restore context and pending work.
  - Added scholar automation metadata support (`digest_enabled`, `digest_frequency`, `alert_enabled`, `alert_keywords`) in subscription storage service.
  - Extended scholar PATCH/list backend APIs to persist and return automation preferences.
  - Upgraded Scholars watchlist cards with digest/alert status badges and quick toggle actions.
  - Added track-name de-duplication when creating track from scholar (`Name Watch`, `Name Watch (2)`, ...).
  - Expanded unit tests for subscription service and scholar routes to cover automation metadata fields.
- Validation:
  - ./scripts/session_bootstrap.sh
  - python -m black src/paperbot/api/routes/research.py src/paperbot/infrastructure/services/subscription_service.py tests/unit/test_research_scholar_routes.py tests/unit/test_subscription_service.py
  - python -m py_compile src/paperbot/api/routes/research.py src/paperbot/infrastructure/services/subscription_service.py tests/unit/test_research_scholar_routes.py tests/unit/test_subscription_service.py
  - pytest tests/unit/test_subscription_service.py tests/unit/test_research_scholar_routes.py -q (environment still exits -1 without stdout)
  - (cd web && ./node_modules/.bin/eslint src/components/scholars/ScholarsWatchlist.tsx src/lib/api.ts src/lib/types.ts)
  - (cd web && ./node_modules/.bin/tsc --noEmit)
- Risks/Notes:
  - Automation preferences are still stored in shared subscription config, not per-user account rows.
- Next:
  - Add per-user/team scoping for scholar automation preferences when user identity model is finalized.
